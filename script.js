console.log("%c [FPSZERO] SYSTEM INTEGRITY: VERIFIED", "color:#00ff00;background:#000;padding:4px;");
console.log("%c [FPSZERO] PROTOCOL: OMEGA-7 ACTIVE", "color:#00ff00;background:#000;padding:4px;");
/* FPSZERO SECURE TRANSMISSION
   UNAUTHORIZED DECOMPILATION PROHIBITED
   ---------------------------------------
*/
console.log("%c [FPSZERO] SYSTEM INTEGRITY: VERIFIED","color:#00ff00;background:#000;padding:4px;");console.log("%c [FPSZERO] PROTOCOL: OMEGA-7 ACTIVE","color:#00ff00;background:#000;padding:4px;");import*as THREE from 'three';import{CSS2DRenderer}from 'three/addons/renderers/CSS2DRenderer.js';import{EffectComposer}from 'three/addons/postprocessing/EffectComposer.js';import{RenderPass}from 'three/addons/postprocessing/RenderPass.js';import{UnrealBloomPass}from 'three/addons/postprocessing/UnrealBloomPass.js';import{Cosmos}from './modules/Cosmos.js';import{GraphEngine}from './modules/GraphEngine.js';import{AudioManager}from './modules/AudioManager.js';import{Moon}from './modules/Moon.js';const CONFIG={headerLinks:[{name:'SYSTEMS',view:'SYSTEMS'},{name:'MANIFESTO',view:'CONTENT',contentKey:'manifesto'},{name:'BLUEPRINTS',view:'KIOSK'},{name:'UPLINK',view:'CONTENT',contentKey:'uplink'},],contentData:{manifesto:{title:'First Principle Synthesis',body:`<p>What I cannot create I do not understand - that’s the core unconscious function of Homo sapiens: you and me, obsessively curious about our existence and surroundings.</p>
                   <p>We don’t really invent from nothing; we decode nature and our own biology, then rebuild them in circuits, code and metal - from abacus to neuromorphic chips, from wheels to starships.</p>
                   <p>We are nature’s mirror, held up by curiosity and refined by necessity, the universe unwrapping itself one frame at a time.</p>
                   <p>This site is a manifestation of that impulse: a first‑principles playground proving that if you can see it in your mind, you can build it, iterate on it, and let imagination set the boundary.</p>
                   <p>One project at a time. One build at a time. Mindfully and consciously</p>`},uplink:{title:'Establish Connection',body:`<p>We are currently operating in stealth mode. Early access to the Anti-Phishing Engine is by invitation only.</p>
                   <ul>
                       <li><a href="https://github.com/KashishOO7/" target="_blank">GitHub Repository</a></li>
                       <li><a href="mailto:lab@fpszero.com">Mail</a></li>
                   </ul>`}},projectsData:{'Anti-Phishing Engine':{color:0xff0055,isPulsar:true,details:{description:"STATUS: FORMING... \n\nA browser-based anomaly detection system using local multi-headed attention models. Zero latency. Zero PII Involvement.",ctas:[{label:'Request Access',url:''},{label:'System Architecture',url:''}]}},'Local Inference Core':{color:0x00aaff,details:{description:"The mathematical backbone.",ctas:[{label:'Coming soon',url:''}]}},'Adversarial Research':{color:0xffaa00,details:{description:"Public findings on breaking LLM safety guardrails and browser security sandboxes.",ctas:[{label:'Read Findings',url:''}]}},'FPSZERO Lab':{color:0xffffff,details:{description:"The Singularity. Origin point of all systems.",ctas:[]}}},audioTracks:[{title:'Founder Log 001: Origin',src:''},{title:'Founder Log 002: The Flaw',src:''},{title:'System Ambience: Core',src:''}]};let scene,camera,renderer,labelRenderer,composer;let cosmos,graphEngine,audioManager,moon;let activeView='HOME';let activeNode=null;let isTransitioning=false;const clock=new THREE.Clock();const mouse=new THREE.Vector2();const ui={home:document.getElementById('home-ui'),content:document.getElementById('content-panel'),kiosk:document.getElementById('kiosk-container'),headerLogo:document.querySelector('#main-header .logo'),backButton:document.getElementById('back-button'),suggestionsBox:document.getElementById('suggestions-box'),searchInput:document.getElementById('search-input'),searchForm:document.getElementById('search-form'),mainNav:document.getElementById('main-nav'),contentTitle:document.getElementById('content-title'),contentBody:document.getElementById('content-body'),projectInfo:document.getElementById('project-info-panel'),projectTitle:document.getElementById('project-title'),projectDescription:document.getElementById('project-description'),projectCtas:document.getElementById('project-ctas'),audioPlayer:document.getElementById('audio-player'),};function init(){localStorage.setItem('fps_core_systems',JSON.stringify(CONFIG.projectsData));scene=new THREE.Scene();scene.fog=new THREE.FogExp2(0x000000,0.002);camera=new THREE.PerspectiveCamera(50,window.innerWidth/window.innerHeight,0.1,5000);camera.position.set(0,20,100);renderer=new THREE.WebGLRenderer({antialias:true,alpha:true});renderer.setPixelRatio(window.devicePixelRatio);renderer.setSize(window.innerWidth,window.innerHeight);renderer.setClearColor(0x000000,1);renderer.toneMapping=THREE.ReinhardToneMapping;document.getElementById('canvas-container').appendChild(renderer.domElement);const renderScene=new RenderPass(scene,camera);const bloomPass=new UnrealBloomPass(new THREE.Vector2(window.innerWidth,window.innerHeight),1.5,0.4,0.85);bloomPass.threshold=0;bloomPass.strength=1.2;bloomPass.radius=0.5;composer=new EffectComposer(renderer);composer.addPass(renderScene);composer.addPass(bloomPass);labelRenderer=new CSS2DRenderer();labelRenderer.setSize(window.innerWidth,window.innerHeight);labelRenderer.domElement.style.position='absolute';labelRenderer.domElement.style.top='0px';labelRenderer.domElement.style.pointerEvents='none';document.getElementById('labels-container').appendChild(labelRenderer.domElement);cosmos=new Cosmos(scene);moon=new Moon(scene,camera);audioManager=new AudioManager(CONFIG.audioTracks);audioManager.createUI();setupUI();window.addEventListener('resize',onWindowResize);window.addEventListener('mousemove',onMouseMove);animate();}function setupUI(){buildHeader();ui.searchForm.addEventListener('submit',onSearch);ui.searchInput.addEventListener('input',onSearchInput);if(ui.backButton){ui.backButton.addEventListener('click',()=>activeNode ? zoomToTarget(null):switchView('HOME'));}if(ui.headerLogo){ui.headerLogo.addEventListener('click',e=>{e.preventDefault();switchView('HOME');});}}function buildHeader(){ui.mainNav.innerHTML='';const ul=document.createElement('ul');CONFIG.headerLinks.forEach(link=>{const li=document.createElement('li');const a=document.createElement('a');a.textContent=link.name;a.href='#';a.dataset.view=link.view;if(link.contentKey)a.dataset.contentKey=link.contentKey;a.onclick=e=>{e.preventDefault();switchView(link.view,{contentKey:link.contentKey});};li.appendChild(a);ul.appendChild(li);});ui.mainNav.appendChild(ul);}function switchView(view,options={}){if(isTransitioning)return;isTransitioning=true;if(view==='HOME'){gsap.to(ui.audioPlayer,{autoAlpha:1,duration:0.6});}else{gsap.to(ui.audioPlayer,{autoAlpha:0,duration:0.4});}const tl=gsap.timeline({onComplete:()=>{activeView=view;isTransitioning=false;if(view==='KIOSK'){const iframe=document.querySelector('#kiosk-container iframe');if(iframe && iframe.contentWindow)iframe.contentWindow.focus();}}});const activeElements=[ui.home,ui.content,ui.kiosk,ui.projectInfo,ui.backButton];tl.to(activeElements,{autoAlpha:0,duration:0.4,onComplete:()=>activeElements.forEach(el=>el.classList.add('hidden'))});tl.add(()=>{if(view==='SYSTEMS'){if(!graphEngine){graphEngine=new GraphEngine(scene,camera,CONFIG,(node)=>zoomToTarget(node));}gsap.to(camera.position,{x:0,y:0,z:80,duration:1.5,onUpdate:()=>camera.lookAt(0,0,0)});}else{if(graphEngine){graphEngine.cleanup();graphEngine=null;}}if(view==='HOME' || view==='CONTENT'){gsap.to(camera.position,{x:0,y:20,z:100,duration:1.5});gsap.to(camera.rotation,{x:0,y:0,z:0,duration:1.5});}if(view==='CONTENT'){ui.contentTitle.innerHTML=CONFIG.contentData[options.contentKey].title;ui.contentBody.innerHTML=CONFIG.contentData[options.contentKey].body;}if(view==='KIOSK'){gsap.to(ui.headerLogo,{autoAlpha:0,duration:0.5});}else{gsap.to(ui.headerLogo,{autoAlpha:1,duration:0.5});}},"-=0.1");if(view==='HOME'){tl.call(()=>ui.home.classList.remove('hidden'));tl.to(ui.home,{autoAlpha:1,duration:0.6});}else if(view==='CONTENT'){tl.call(()=>ui.content.classList.remove('hidden'));tl.to(ui.content,{autoAlpha:1,duration:0.6});}else if(view==='KIOSK'){tl.call(()=>ui.kiosk.classList.remove('hidden'));tl.to(ui.kiosk,{autoAlpha:1,duration:0.6});}document.querySelectorAll('#main-nav a').forEach(a=>a.classList.remove('active'));let selector=`#main-nav a[data-view="${view}"]`;if(options.contentKey)selector+=`[data-content-key="${options.contentKey}"]`;const activeLink=document.querySelector(selector);if(activeLink)activeLink.classList.add('active');}function zoomToTarget(target){isTransitioning=true;if(target){activeNode=target;const targetPos=new THREE.Vector3();target.getWorldPosition(targetPos);ui.projectInfo.classList.remove('hidden');ui.backButton.classList.remove('hidden');const data=target.userData;ui.projectTitle.textContent=data.name;ui.projectDescription.textContent=data.details.description;ui.projectCtas.innerHTML='';if(data.details.ctas){data.details.ctas.forEach(cta=>{const a=document.createElement('a');a.href=cta.url;a.target='_blank';a.className='cta-button';a.textContent=cta.label;ui.projectCtas.appendChild(a);});}gsap.to(ui.headerLogo,{autoAlpha:0,duration:0.5});gsap.to(ui.projectInfo,{autoAlpha:1,duration:0.8});gsap.to(ui.backButton,{autoAlpha:1,duration:0.5});const offset=new THREE.Vector3(10,5,20);const finalPos=targetPos.clone().add(offset);gsap.to(camera.position,{duration:1.5,x:finalPos.x,y:finalPos.y,z:finalPos.z,ease:"power2.inOut",onUpdate:()=>camera.lookAt(targetPos),onComplete:()=>{isTransitioning=false;camera.lookAt(targetPos);}});}else{activeNode=null;gsap.to(ui.headerLogo,{autoAlpha:1,duration:0.5});gsap.to(ui.projectInfo,{autoAlpha:0,duration:0.5,onComplete:()=>ui.projectInfo.classList.add('hidden')});gsap.to(ui.backButton,{autoAlpha:0,duration:0.5,onComplete:()=>ui.backButton.classList.add('hidden')});gsap.to(camera.position,{duration:1.5,x:0,y:0,z:80,ease:"power2.inOut",onUpdate:()=>camera.lookAt(0,0,0),onComplete:()=>{isTransitioning=false;}});}}function onSearch(e){e.preventDefault();const term=ui.searchInput.value.trim().toLowerCase();const found=Object.keys(CONFIG.projectsData).find(p=>p.toLowerCase()===term.toLowerCase());if(found){switchView('SYSTEMS');setTimeout(()=>{if(graphEngine){const node=graphEngine.group.children.find(c=>c.userData.name===found);if(node)zoomToTarget(node);}},1600);}ui.suggestionsBox.innerHTML='';}function onSearchInput(){const q=ui.searchInput.value.toLowerCase();ui.suggestionsBox.innerHTML='';if(!q)return;const matches=Object.keys(CONFIG.projectsData).filter(p=>p.toLowerCase().includes(q));matches.forEach(m=>{const div=document.createElement('div');div.className='suggestion-item';div.textContent=m;div.onclick=()=>{ui.searchInput.value=m;onSearch(new Event('submit'));};ui.suggestionsBox.appendChild(div);});}function onMouseMove(e){mouse.x=(e.clientX/window.innerWidth)*2-1;mouse.y=-(e.clientY/window.innerHeight)*2+1;}function onWindowResize(){camera.aspect=window.innerWidth/window.innerHeight;camera.updateProjectionMatrix();renderer.setSize(window.innerWidth,window.innerHeight);composer.setSize(window.innerWidth,window.innerHeight);labelRenderer.setSize(window.innerWidth,window.innerHeight);}function animate(){requestAnimationFrame(animate);const delta=clock.getDelta();const time=clock.getElapsedTime();cosmos.update(time,delta);if(moon)moon.update(time,delta);if(activeView==='HOME' || activeView==='CONTENT'){camera.position.x+=(mouse.x*2-camera.position.x)*0.02;camera.position.y+=(mouse.y*2-camera.position.y)*0.02;if(activeView==='HOME')camera.lookAt(0,0,0);}if(graphEngine){graphEngine.update(delta,time,!activeNode && !isTransitioning);}composer.render();labelRenderer.render(scene,camera);}init();